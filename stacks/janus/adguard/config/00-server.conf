server:
  # Log verbosity (0 = only errors, 1+ = more verbose)
  verbosity: 0

  # Listen on all interfaces inside the container
  interface: 0.0.0.0
  port: 53

  # Protocols
  do-ip4: yes
  do-udp: yes
  do-tcp: yes
  do-ip6: yes
  prefer-ip6: no

  # Performance / threading
  num-threads: 2
  # Let the OS decide socket buffer sizes (avoids warnings in containers)
  so-rcvbuf: 0
  so-sndbuf: 0

  # Cache sizes and TTLs
  msg-cache-size: 128m
  rrset-cache-size: 256m
  cache-min-ttl: 300      # minimum cache lifetime in seconds
  cache-max-ttl: 14400    # maximum cache lifetime in seconds (4 hours)

  # Hide server identity/version
  hide-identity: yes
  hide-version: yes

  # DNSSEC and hardening
  harden-glue: yes
  harden-dnssec-stripped: yes
  harden-referral-path: yes
  harden-algo-downgrade: yes
  qname-minimisation: yes

  # 0 is safer with some broken upstreams; avoids some DNSSEC/EDNS issues
  use-caps-for-id: no

  # Prefetch popular records before they expire
  prefetch: yes
  prefetch-key: yes

  # Allow queries from Docker networks (AdGuard container, etc.)
  # You can restrict this further to a specific subnet if you want.
  access-control: 0.0.0.0/0 allow

  # Treat these ranges as private; do not leak them upstream
  private-address: 192.168.0.0/16
  private-address: 169.254.0.0/16
  private-address: 172.16.0.0/12
  private-address: 10.0.0.0/8
  private-address: fd00::/8
  private-address: fe80::/10
  private-address: 192.0.2.0/24
  private-address: 198.51.100.0/24
  private-address: 203.0.113.0/24
  private-address: 255.255.255.255/32
  private-address: 2001:db8::/32

remote-control:
  # Disable unbound-control inside the container to avoid socket errors
  control-enable: no
